---
allowed-tools: all
description: Spawn three agents to fix JSDoc issues in parallel across different files
---

# ðŸš€ PARALLEL JSDOC FIX

**Spawns 3 agents to work on JSDoc fixes simultaneously**

## ðŸ“Š DATA SOURCE
This command uses pre-generated work batch files from `.claude-work/` directory that contain:
- Exact file paths with JSDoc issues
- Issue counts per file
- Specific line numbers and error details

The work batches are generated by `.claude/utils/generate-jsdoc-work-batches.sh`

## ðŸ“‹ Usage

### Basic Usage (default 3 agents)
`/project:parallel-jsdoc-fix` - Spawns 3 agents for files with most JSDoc issues

### Specify Agent Count
`/project:parallel-jsdoc-fix 5` - Spawns 5 agents instead of 3

### With Work Batch
`/project:parallel-jsdoc-fix /path/to/work-batch.txt` - Uses work batch to prioritize files

## ðŸŽ¯ WORKFLOW

### 1. Check for Existing Work Batches
**IMPORTANT**: First check if work batch files exist in `.claude-work/` directory:
```bash
ls -la .claude-work/*.work.txt
```

If no work batch files exist, generate them first:
```bash
.claude/utils/generate-jsdoc-work-batches.sh
```

### 2. Analyze Current JSDoc Issues
```bash
# Use the utility script to see what agents would be spawned
# This reads from the .claude-work/*.work.txt files
node .claude/utils/spawn-parallel-agents.js 3

# Or for 5 agents:
node .claude/utils/spawn-parallel-agents.js 5
```

### 3. Select 3 Files for Parallel Processing
The utility script will automatically:
- Read work batch files from `.claude-work/` directory
- Select files with the most JSDoc issues
- Choose files from different directories to avoid conflicts
- Parse the exact issue counts and locations

### 4. Spawn Agents Using the Utility

First, I'll run the utility to get the agent prompts:
```bash
# Generate prompts for 3 agents using work batch data
node .claude/utils/spawn-parallel-agents.js 3
```

Then I'll use the Task tool to spawn each agent with the generated prompts.

### 4. Agent Task Template

Each agent receives this task:
```
Fix all JSDoc issues in <file-path>

Instructions:
1. Read the file to understand its structure
2. Add meaningful JSDoc comments for:
   - All class declarations
   - All method declarations (with @param and @returns)
   - All interface properties
   - All type definitions
3. Use MultiEdit tool for efficiency
4. Ensure comments describe purpose, not just repeat the name
5. The quality check hook will validate your work

IMPORTANT: 
- Hooks will auto-format your code
- Focus on content, not formatting
- Work independently - don't check other files
```

## ðŸ”§ IMPLEMENTATION PATTERN

To spawn multiple agents programmatically:

```typescript
// In your VS Code extension command
async function parallelJsdocFix(context: vscode.ExtensionContext) {
    // Get files with most JSDoc issues
    const filesWithIssues = await getFilesWithJsdocIssues();
    
    // Select top 3 files
    const selectedFiles = filesWithIssues.slice(0, 3);
    
    // Spawn agents in parallel
    const agentPromises = selectedFiles.map((file, index) => {
        return spawnAgent({
            task: `Fix JSDoc in ${file.path}`,
            description: `Agent ${index + 1}: Fix ${file.issueCount} JSDoc issues`,
            prompt: generateJsdocFixPrompt(file)
        });
    });
    
    // Wait for all agents to complete
    const results = await Promise.all(agentPromises);
    
    // Report results
    showAgentResults(results);
}
```

## ðŸŽ® ADVANCED USAGE

### Smart File Selection
- Avoid files currently open in editor
- Skip files with merge conflicts
- Prioritize by issue count and importance

### Conflict Prevention
- Select files from different modules
- Avoid parent/child file relationships
- Check for file dependencies

### Progress Tracking
- Monitor each agent's progress
- Show combined statistics
- Handle failures gracefully

## âœ… SUCCESS CRITERIA

All 3 agents complete successfully with:
- Zero JSDoc warnings in their assigned files
- All hooks passing (TypeScript, ESLint, Prettier)
- No merge conflicts between changes

## ðŸ”„ FOLLOW-UP

After agents complete:
1. Run `npm run lint` to verify all fixes
2. Check for any remaining JSDoc issues
3. Spawn additional agents if needed

## ðŸš€ EXECUTION STEPS

When this command runs, I will:

1. **First check for work batch files in `.claude-work/` directory**
   - If none exist, run `.claude/utils/generate-jsdoc-work-batches.sh` to create them
   
2. **Use the spawn-parallel-agents.js utility** which:
   - Reads all `.work.txt` files from `.claude-work/`
   - Parses file paths and issue counts
   - Selects optimal files for parallel processing
   
3. **Spawn 3 Task agents** with specific prompts for each file

**STARTING PARALLEL JSDOC FIX...**