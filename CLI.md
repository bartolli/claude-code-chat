# Claude CLI

```bash
$ claude --help                                                                           on  main [!?] is 󰏗 v0.1.2 via  v22.15.0 took 2h11m19s 
Usage: claude [options] [command] [prompt]

Claude Code - starts an interactive session by default, use -p/--print for non-interactive output

Arguments:
  prompt                          Your prompt

Options:
  -d, --debug                     Enable debug mode
  --verbose                       Override verbose mode setting from config
  -p, --print                     Print response and exit (useful for pipes)
  --output-format <format>        Output format (only works with --print): "text" (default), "json" (single result), or "stream-json" (realtime streaming)
                                  (choices: "text", "json", "stream-json")
  --input-format <format>         Input format (only works with --print): "text" (default), or "stream-json" (realtime streaming input) (choices: "text",
                                  "stream-json")
  --mcp-debug                     [DEPRECATED. Use --debug instead] Enable MCP debug mode (shows MCP server errors)
  --dangerously-skip-permissions  Bypass all permission checks. Recommended only for sandboxes with no internet access.
  --allowedTools <tools...>       Comma or space-separated list of tool names to allow (e.g. "Bash(git:*) Edit")
  --disallowedTools <tools...>    Comma or space-separated list of tool names to deny (e.g. "Bash(git:*) Edit")
  --mcp-config <file or string>   Load MCP servers from a JSON file or string
  -c, --continue                  Continue the most recent conversation
  -r, --resume [sessionId]        Resume a conversation - provide a session ID or interactively select a conversation to resume
  --model <model>                 Model for the current session. Provide an alias for the latest model (e.g. 'sonnet' or 'opus') or a model's full name (e.g.
                                  'claude-sonnet-4-20250514').
  --fallback-model <model>        Enable automatic fallback to specified model when default model is overloaded (only works with --print)
  --add-dir <directories...>      Additional directories to allow tool access to
  -v, --version                   Output the version number
  -h, --help                      Display help for command

Commands:
  config                          Manage configuration (eg. claude config set -g theme dark)
  mcp                             Configure and manage MCP servers
  migrate-installer               Migrate from global npm installation to local installation
  doctor                          Check the health of your Claude Code auto-updater
  update                          Check for updates and install if available
  install [options]               Install Claude Code native build
```

## `claude` cli verbose streaming test

```bash
~/Projects/claude-extension ❯ claude -p --output-format stream-json --verbose --model opus "Hey Claude, do you see my cli.md 
file? What do you think?"
{"type":"system","subtype":"init","cwd":"/Users/bartolli/Projects/claude-extension","session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43","tools":["Task","Bash","Glob","Grep","LS","exit_plan_mode","Read","Edit","MultiEdit","Write","NotebookRead","NotebookEdit","WebFetch","TodoRead","TodoWrite","WebSearch"],"mcp_servers":[],"model":"claude-opus-4-20250514","permissionMode":"default","apiKeySource":"none"}
{"type":"assistant","message":{"id":"msg_0129yT5UBaqkdZA7Rba1UbJf","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"thinking","thinking":"The user is asking me to look at their cli.md file and provide my thoughts on it. I need to:\n1. First check if there's a cli.md file in the current directory\n2. Read its contents\n3. Provide my thoughts on it\n\nLet me start by looking for the file.","signature":"EqADCkYIBBgCKkAzB7tnaD7dkiZhidIjPMLCEcrc9xA4eXRYBfRd6T8i8wnbbwrpoR1XXh5X+zUxNEpS4+FCwVdNIEX4D3ctnEjPEgya7Q8iK6FwFiJoxNIaDBl3s1k2CgF0R2Nw5CIw+bVuxtUSw1nHzVOUPxw24VZTMTelCioG3dpCpdN1PNjZWUlN9nmnnyILKAFhRdy1KocCjTARetrB/KkD8HxsABXUfeSVj+e2KCdntXwy7liNvSC1u7cV+HbHkcH2t0L9CWsrSYzsX2O2WZ5gM/XOswhIF/UTjiJtS8sPLGu0iCVajNmzHbqPorM+t7xhARzfLaOdOR02uAg3Yq1WO3r6540xhmALxKKxqPdwtNHB1nbG8Js4TJxNT3Heu6LqMLru+WvCyEBgzge2M4dWD31w+LVFE6vj9BO87cZ1zDH/y9DMndnoqtpqjKBMqcbh2SNoc0iN7h57C+0uEWO5m+wPrDozk76yUPwZeT7PgvM/yYQolQUpQT4rCM24XB8i/fuFYzMZZnBtYDHoAQI+JgFh7+/2sTiqVjRc/KoYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":9,"cache_creation_input_tokens":483,"cache_read_input_tokens":12899,"output_tokens":6,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_0129yT5UBaqkdZA7Rba1UbJf","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"text","text":"I'll look for your cli.md file and review it."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":9,"cache_creation_input_tokens":483,"cache_read_input_tokens":12899,"output_tokens":6,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_0129yT5UBaqkdZA7Rba1UbJf","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"tool_use","id":"toolu_011XJM3kdVH72HmjniY2kLsc","name":"Glob","input":{"pattern":"**/cli.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":9,"cache_creation_input_tokens":483,"cache_read_input_tokens":12899,"output_tokens":6,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011XJM3kdVH72HmjniY2kLsc","type":"tool_result","content":"/Users/bartolli/Projects/claude-extension/claude-code-chat/CLI.md"}]},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_01RRmcYi8rVJ1tJAT7RQhQL2","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"thinking","thinking":"Found the file at /Users/bartolli/Projects/claude-extension/claude-code-chat/CLI.md. Now let me read it to see what's in it.","signature":"EqYCCkYIBBgCKkBM0E7XcmmTz+D6zeW/xglYRd2Yutl8M7xrurR2vWlcaP+MMRHIXtRMB45cU7XXwJGnre48bcg///6/UyYbwf0REgwLwIHVbfZFnFPTsvQaDDPeJV2sCas6wzpBryIwc/551oDErj0FET5TL92UtrTOxUT5ZDUD6p/UJFQkY/TA4uhEtyM3+v4/P9Srco9cKo0B2g/9IbLG8U+GQ3jarLMkPA/V6b3ttRTsXRYUgY81l49SybjV5E1iS57l39trA6Eqp/U7RkgmEgMRg6clIwMzxzVr9/fKhurpgJyrJfa0nF1yZZqwDZbk2lIm+uqC9WrZec3S4+pl+D02pkAgf+qul2lw8we8w5RriixuUC620M5enpaf/QRAlgILZV2WGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":365,"cache_read_input_tokens":13382,"output_tokens":13,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_01RRmcYi8rVJ1tJAT7RQhQL2","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"tool_use","id":"toolu_016kZQ8dJ9PcgNNJ5D2zyLdk","name":"Read","input":{"file_path":"/Users/bartolli/Projects/claude-extension/claude-code-chat/CLI.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":365,"cache_read_input_tokens":13382,"output_tokens":13,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016kZQ8dJ9PcgNNJ5D2zyLdk","type":"tool_result","content":"     1→# Claude CLI\n     2→\n     3→```bash\n     4→$ claude --help                                                                           on  main [!?] is 󰏗 v0.1.2 via  v22.15.0 took 2h11m19s \n     5→Usage: claude [options] [command] [prompt]\n     6→\n     7→Claude Code - starts an interactive session by default, use -p/--print for non-interactive output\n     8→\n     9→Arguments:\n    10→  prompt                          Your prompt\n    11→\n    12→Options:\n    13→  -d, --debug                     Enable debug mode\n    14→  --verbose                       Override verbose mode setting from config\n    15→  -p, --print                     Print response and exit (useful for pipes)\n    16→  --output-format <format>        Output format (only works with --print): \"text\" (default), \"json\" (single result), or \"stream-json\" (realtime streaming)\n    17→                                  (choices: \"text\", \"json\", \"stream-json\")\n    18→  --input-format <format>         Input format (only works with --print): \"text\" (default), or \"stream-json\" (realtime streaming input) (choices: \"text\",\n    19→                                  \"stream-json\")\n    20→  --mcp-debug                     [DEPRECATED. Use --debug instead] Enable MCP debug mode (shows MCP server errors)\n    21→  --dangerously-skip-permissions  Bypass all permission checks. Recommended only for sandboxes with no internet access.\n    22→  --allowedTools <tools...>       Comma or space-separated list of tool names to allow (e.g. \"Bash(git:*) Edit\")\n    23→  --disallowedTools <tools...>    Comma or space-separated list of tool names to deny (e.g. \"Bash(git:*) Edit\")\n    24→  --mcp-config <file or string>   Load MCP servers from a JSON file or string\n    25→  -c, --continue                  Continue the most recent conversation\n    26→  -r, --resume [sessionId]        Resume a conversation - provide a session ID or interactively select a conversation to resume\n    27→  --model <model>                 Model for the current session. Provide an alias for the latest model (e.g. 'sonnet' or 'opus') or a model's full name (e.g.\n    28→                                  'claude-sonnet-4-20250514').\n    29→  --fallback-model <model>        Enable automatic fallback to specified model when default model is overloaded (only works with --print)\n    30→  --add-dir <directories...>      Additional directories to allow tool access to\n    31→  -v, --version                   Output the version number\n    32→  -h, --help                      Display help for command\n    33→\n    34→Commands:\n    35→  config                          Manage configuration (eg. claude config set -g theme dark)\n    36→  mcp                             Configure and manage MCP servers\n    37→  migrate-installer               Migrate from global npm installation to local installation\n    38→  doctor                          Check the health of your Claude Code auto-updater\n    39→  update                          Check for updates and install if available\n    40→  install [options]               Install Claude Code native build\n    41→```\n    42→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_01Secz7WsR5MgRUqrDV3F7jS","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"thinking","thinking":"The user has a CLI.md file that appears to be documentation for a Claude CLI tool. It shows the help output for the `claude` command with various options and commands. This looks like documentation for Claude Code, which is a CLI tool for interacting with Claude.\n\nThe file shows:\n- Basic usage patterns\n- Various command-line options like --debug, --print, --model, etc.\n- Subcommands like config, mcp, migrate-installer, doctor, update, install\n- Options for controlling tool permissions, MCP configuration, conversation resumption, etc.\n\nThis appears to be legitimate documentation and not malicious code. I should provide my thoughts on the documentation.","signature":"Er0GCkYIBBgCKkBT8riZ2jnO98U9IgzhdKxkLahg11EX24u6ymXijY1WANe1RfsiOc6BWP1vUuCfNZnViOhaQ75LC9jUod+tnF8uEgx3ZGKPCKvBTpuh088aDNwiGr+sbnRh+FxoNyIwJ9TOF3CV+dY2OmM5miKYjOpLfoIQg7dwJMChESGnLYdp79PMEKPlodK8HhdhXEe4KqQFXyisO+omiBVof/1gTKEPGR1GLfeY5CWcNmXI9QbrtX+G95CKtTQCAWOckuz4uySO3EWTt/9MYH8w2xSVA2Kq71tt8i3PGAeEu0OFnfGxryj7D68F7MEuocfVufWrGkmpp229LbKu2IvNJ3rqXLX3LoMefofzSScIQgCbaA5Vaf580RrXjalXMS2gNct8ytZ284TyedvugfnUJZHSBSXK7hL+Bc03bHBXqzoZ7BfQ7PFoYJz0nh0ruUzQeN4a5syY1/z9EcW2LTmwkKh+Iuc/Ofhk4KrKC+n9iI2rRqrp2wVr8OPyND8UlEunxuwRE0Gv9M3Jdzbldg50vEmL/RkUWloKj2lAFQDRYUrWsQBXioLeIKfHyYNL5plWk6R5HPyVHgY0sCGvkbnohO56JtJd1bsHnW8Vg6sISkyxxeL3tHc7cWz2k+bpnZTikVGJepbSbD/rv0tytKBLNpQdBrlGmrQ/p/4RUvcbpDJZ/v01isaQjzPfFjCKT/cyZaNM5kAcWNHGrP8jbJP1Z083AU+yorxJMK70R+P+lw91Lke8XmZKWZz4ttX6+XdUqkYsb9BfjM5UolMDd2wmrRbz49SxGCN/7CPF+kPC1qSLY4iTayZ83266mk9h8WP8ZsYqzQy+XgVNvY8bkQbI3GnOdHBPVuW59TPgk6MDOScQRmOIrCBLzdPMcsyNbKfKsl9uL8yNcbJVyxdx9fcmjLtfaYm023B0tCADHV6BfUDpT1yRQ/K7wb+omGRYZaXNPs0rj5QjCA0KzNTpcBA4g0MzlUXnHIuM4QZEFJtW3828F8fxQv1dacbx68+pPSYFVreuvFybworqZ9u2D0P7BMIDYfP0z19XROBRZkjkYCBcft63GJUk1YtNWBgosIC/H0GntrUzSPI1QRgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":1032,"cache_read_input_tokens":13747,"output_tokens":2,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"assistant","message":{"id":"msg_01Secz7WsR5MgRUqrDV3F7jS","type":"message","role":"assistant","model":"claude-opus-4-20250514","content":[{"type":"text","text":"Nice documentation! This CLI.md file provides a clear reference for the Claude Code CLI. It captures the help output nicely, showing all the available options and commands. The formatting makes it easy to scan through the different flags and understand what each does.\n\nSome highlights I noticed:\n- Good organization with arguments, options, and commands clearly separated\n- Useful features like `--continue` and `--resume` for conversation management\n- Security-conscious with permission controls (`--allowedTools`, `--disallowedTools`)\n- Flexible output formats for integration with other tools\n- MCP (Model Context Protocol) server support\n\nThe documentation style is clean and follows standard CLI help conventions. This would be very helpful for anyone using or onboarding to Claude Code."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":1032,"cache_read_input_tokens":13747,"output_tokens":318,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":22197,"duration_api_ms":21975,"num_turns":9,"result":"Nice documentation! This CLI.md file provides a clear reference for the Claude Code CLI. It captures the help output nicely, showing all the available options and commands. The formatting makes it easy to scan through the different flags and understand what each does.\n\nSome highlights I noticed:\n- Good organization with arguments, options, and commands clearly separated\n- Useful features like `--continue` and `--resume` for conversation management\n- Security-conscious with permission controls (`--allowedTools`, `--disallowedTools`)\n- Flexible output formats for integration with other tools\n- MCP (Model Context Protocol) server support\n\nThe documentation style is clean and follows standard CLI help conventions. This would be very helpful for anyone using or onboarding to Claude Code.","session_id":"7a8d1f0c-56fa-4776-8c0d-466bd57f5f43","total_cost_usd":0.141237,"usage":{"input_tokens":33,"cache_creation_input_tokens":1880,"cache_read_input_tokens":40028,"output_tokens":606,"server_tool_use":{"web_search_requests":0}}}
```
